module.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s="qVkA")}({"+BZU":function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n("+MSS"),o=n("tp4g"),i=n("pT2+");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(t,"prototype",{value:Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),writable:!1}),e&&l(t,e)}(s,t);var e,n,r,a=u(s);function s(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),h(f(n=a.call(this)),"node",void 0),h(f(n),"text",void 0),h(f(n),"anchorAngle",void 0),h(f(n),"mouseOffsetAngle",void 0),n.node=t,n.anchorAngle=0,n.mouseOffsetAngle=0,n.text="",e&&n.set_anchor_point(e.x,e.y),n}return e=s,(n=[{key:"set_mouse_start",value:function(t,e){this.mouseOffsetAngle=this.anchorAngle-Math.atan2(e-this.node.y,t-this.node.x)}},{key:"set_anchor_point",value:function(t,e){this.anchorAngle=Math.atan2(e-this.node.y,t-this.node.x)+this.mouseOffsetAngle;var n=Math.round(this.anchorAngle/(Math.PI/2))*(Math.PI/2);Math.abs(this.anchorAngle-n)<.1&&(this.anchorAngle=n),this.anchorAngle<-Math.PI&&(this.anchorAngle+=2*Math.PI),this.anchorAngle>Math.PI&&(this.anchorAngle-=2*Math.PI)}},{key:"get_endpoints_and_circle",value:function(){var t=this.node.x+1.5*o.e*Math.cos(this.anchorAngle),e=this.node.y+1.5*o.e*Math.sin(this.anchorAngle),n=.75*o.e,r=this.anchorAngle-.8*Math.PI,i=this.anchorAngle+.8*Math.PI;return{hasCircle:!0,startX:t+n*Math.cos(r),startY:e+n*Math.sin(r),endX:t+n*Math.cos(i),endY:e+n*Math.sin(i),startAngle:r,endAngle:i,circleX:t,circleY:e,circleRadius:n}}},{key:"draw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.get_endpoints_and_circle();t.beginPath(),t.arc(n.circleX,n.circleY,n.circleRadius,n.startAngle,n.endAngle,!1),t.stroke();var r=n.circleX+n.circleRadius*Math.cos(this.anchorAngle),o=n.circleY+n.circleRadius*Math.sin(this.anchorAngle);Object(i.c)(t,this.text,r,o,this.anchorAngle,this.selected,e),Object(i.b)(t,n.endX,n.endY,n.endAngle+.4*Math.PI)}},{key:"contains_point",value:function(t){var e=this.get_endpoints_and_circle(),n=t.x-e.circleX,r=t.y-e.circleY,i=Math.sqrt(n*n+r*r)-e.circleRadius;return Math.abs(i)<o.d}}])&&c(e.prototype,n),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(r.a)},"+MSS":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("tp4g");function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"selected",!1),i(this,"active",!1),i(this,"text","")}var e,n,a;return e=t,(n=[{key:"curr_colour",value:function(){return this.selected?r.f:this.active?r.a:r.h}}])&&o(e.prototype,n),a&&o(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}()},"1aiP":function(t,e,n){"use strict";function r(t,e,n,r,o,i,a,c,l){return t*o*l+e*i*a+n*r*c-t*i*c-e*r*l-n*o*a}n.d(e,"a",(function(){return y}));var o=n("+MSS"),i=n("tp4g"),a=n("pT2+");function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(t,"prototype",{value:Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),writable:!1}),e&&u(t,e)}(f,t);var e,n,o,c=s(f);function f(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),p(d(n=c.call(this)),"nodeA",void 0),p(d(n),"nodeB",void 0),p(d(n),"text",void 0),p(d(n),"lineAngleAdjust",void 0),p(d(n),"parallelPart",void 0),p(d(n),"perpendicularPart",void 0),n.nodeA=t,n.nodeB=e,n.text="",n.lineAngleAdjust=0,n.parallelPart=.5,n.perpendicularPart=0,n}return e=f,(n=[{key:"get_anchor_point",value:function(){var t=this.nodeB.x-this.nodeA.x,e=this.nodeB.y-this.nodeA.y,n=Math.sqrt(t*t+e*e);return{x:this.nodeA.x+t*this.parallelPart-e*this.perpendicularPart/n,y:this.nodeA.y+e*this.parallelPart+t*this.perpendicularPart/n}}},{key:"set_anchor_point",value:function(t,e){var n=this.nodeB.x-this.nodeA.x,r=this.nodeB.y-this.nodeA.y,o=Math.sqrt(n*n+r*r);this.parallelPart=(n*(t-this.nodeA.x)+r*(e-this.nodeA.y))/(o*o),this.perpendicularPart=(n*(e-this.nodeA.y)-r*(t-this.nodeA.x))/o,this.parallelPart>0&&this.parallelPart<1&&Math.abs(this.perpendicularPart)<i.g&&(this.lineAngleAdjust=+(this.perpendicularPart<0)*Math.PI,this.perpendicularPart=0)}},{key:"get_endpoints_and_circle",value:function(){if(0==this.perpendicularPart){var t=(this.nodeA.x+this.nodeB.x)/2,e=(this.nodeA.y+this.nodeB.y)/2,n=this.nodeA.closest_point_on_circle(t,e),o=this.nodeB.closest_point_on_circle(t,e);return{hasCircle:!1,startX:n.x,startY:n.y,endX:o.x,endY:o.y}}var a,c,l,u,s,f,d,h,p,y,b=this.get_anchor_point(),v=(a=this.nodeA.x,c=this.nodeA.y,l=this.nodeB.x,u=this.nodeB.y,s=b.x,f=b.y,d=r(a,c,1,l,u,1,s,f,1),h=-r(a*a+c*c,c,1,l*l+u*u,u,1,s*s+f*f,f,1),p=r(a*a+c*c,a,1,l*l+u*u,l,1,s*s+f*f,s,1),y=-r(a*a+c*c,a,c,l*l+u*u,l,u,s*s+f*f,s,f),{x:-h/(2*d),y:-p/(2*d),radius:Math.sqrt(h*h+p*p-4*d*y)/(2*Math.abs(d))}),_=this.perpendicularPart>0,m=_?1:-1,g=Math.atan2(this.nodeA.y-v.y,this.nodeA.x-v.x)-m*i.e/v.radius,j=Math.atan2(this.nodeB.y-v.y,this.nodeB.x-v.x)+m*i.e/v.radius;return{hasCircle:!0,startX:v.x+v.radius*Math.cos(g),startY:v.y+v.radius*Math.sin(g),endX:v.x+v.radius*Math.cos(j),endY:v.y+v.radius*Math.sin(j),startAngle:g,endAngle:j,circleX:v.x,circleY:v.y,circleRadius:v.radius,reverseScale:m,isReversed:_}}},{key:"draw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.get_endpoints_and_circle();if(t.beginPath(),n.hasCircle?t.arc(n.circleX,n.circleY,n.circleRadius,n.startAngle,n.endAngle,n.isReversed):(t.moveTo(n.startX,n.startY),t.lineTo(n.endX,n.endY)),t.stroke(),n.hasCircle?Object(a.b)(t,n.endX,n.endY,n.endAngle-n.reverseScale*(Math.PI/2)):Object(a.b)(t,n.endX,n.endY,Math.atan2(n.endY-n.startY,n.endX-n.startX)),n.hasCircle){var r=n.startAngle,o=n.endAngle;o<r&&(o+=2*Math.PI);var i=(r+o)/2+ +n.isReversed*Math.PI,c=n.circleX+n.circleRadius*Math.cos(i),l=n.circleY+n.circleRadius*Math.sin(i);Object(a.c)(t,this.text,c,l,i,this.selected,e)}else{var u=(n.startX+n.endX)/2,s=(n.startY+n.endY)/2,f=Math.atan2(n.endX-n.startX,n.startY-n.endY);Object(a.c)(t,this.text,u,s,f+this.lineAngleAdjust,this.selected,e)}}},{key:"contains_point",value:function(t){var e=t.x,n=t.y,r=this.get_endpoints_and_circle();if(!r.hasCircle){var o=r.endX-r.startX,a=r.endY-r.startY,c=Math.sqrt(o*o+a*a),l=(o*(e-r.startX)+a*(n-r.startY))/(c*c),u=(o*(n-r.startY)-a*(e-r.startX))/c;return l>0&&l<1&&Math.abs(u)<i.d}var s=e-r.circleX,f=n-r.circleY,d=Math.sqrt(s*s+f*f)-r.circleRadius;if(Math.abs(d)<i.d){var h=Math.atan2(f,s),p=r.startAngle,y=r.endAngle;if(r.isReversed){var b=p;p=y,y=b}return y<p&&(y+=2*Math.PI),h<p?h+=2*Math.PI:h>y&&(h-=2*Math.PI),h>p&&h<y}return!1}}])&&l(e.prototype,n),o&&l(e,o),Object.defineProperty(e,"prototype",{writable:!1}),f}(o.a)},GClJ:function(t,e,n){"use strict";n.d(e,"a",(function(){return Mt}));var r,o=n("HteQ"),i=n("gSRK"),a=n("tp4g"),c=n("1aiP"),l=n("+BZU"),u=n("NZMw");function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f="*&*",d="*",h="+",p="(",y=")",b=[h,p,y],v=[f,h],_=[d],m=[p,h,f,d],g=[y,h,f],j=(s(r={},d,8),s(r,f,4),s(r,h,2),r),O=n("pT2+");function w(t){for(var e=function(t){t=t.replace(/(\w)\*/g,"($1)*"),t=Object(O.a)(t);var e=[],n=0,r=0;for(;r<t.length;){if(b.includes(t[r]))n!=r&&e.push(t.slice(n,r)),n=r+1,e.push(t[r]);else if(t[r]==d){for(var o=e.length-1,i=0;o>=0&&(e[o]==y?i++:e[o]==p&&i--,0!=i);)o--;e.splice(o,0,t[r]),n=r+1}r++}n!=r&&e.push(t.slice(n));r=e.length-1;for(;r>0;)m.includes(e[r-1])||g.includes(e[r])||e.splice(r,0,f),r--;return e}(t),n=[],r=[],o=0;o<e.length;o++){var i=e[o];if(i==d)r.push(i);else if(v.includes(i)){for(;r.length>0;){var a=r[r.length-1];if(!(a!=p&&j[a]>=j[i]))break;var c=r.pop();null!=c&&n.push(c)}r.push(i)}else if(i==p)r.push(i);else if(i==y){for(;r.length>0;){if(r[r.length-1]==p)break;var l=r.pop();null!=l&&n.push(l)}if(0==r.length&&console.error("The operator stack is empty, fix the parentheses."),r.pop(),r.length>0&&_.includes(r[length-1])){var u=r.pop();null!=u&&n.push(u)}}else n.push(i)}for(var s=r.pop();null!=s;)n.push(s),s=r.pop();return n}var A=n("YfD9");function x(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function k(t,e){var n,r=x(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;t.includes(o)||t.push(o)}}catch(t){r.e(t)}finally{r.f()}}function P(t){return t instanceof A.a?"".concat(t.text,":").concat(t.x,",").concat(t.y):t instanceof c.a?"".concat(P(t.nodeA),"->").concat(P(t.nodeB),":").concat(t.text).concat(t.get_anchor_point().x,",").concat(t.get_anchor_point().y):t instanceof u.a?"".concat(P(t.node),":").concat(t.get_start_point().x,",").concat(t.get_start_point().y):JSON.stringify(t)}function M(){var t=Object(i.c)();if(null!=t){var e=t.el;if(null!=e)return{x:Math.random()*(e.width-2*a.b)+a.b,y:Math.random()*(e.height-2*a.b)+a.b}}return{x:0,y:0}}function T(t){return function(t){if(Array.isArray(t))return E(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||R(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){if(t){if("string"==typeof t)return E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(t,e):void 0}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function I(t,e,n){if(t.isAcceptState)return!1;for(var r=[],o=[],i=[],a=[],s=0;s<n.length;s++){var f=n[s];if(f instanceof l.a&&f.node==t)i.push(f);else if(f instanceof c.a)f.nodeA==t?o.push(f):f.nodeB==t&&r.push(f);else if(f instanceof u.a&&f.node==t)return!1}var d="";if(i.length>0){for(var h=[],p=0;p<i.length;p++)h.push.apply(h,T(i[p].text.split(",")));1==h.length&&1==h[0].length?d="".concat(h[0],"*"):h.length>0&&(d="(".concat(h.join("+"),")*"))}for(var y=0;y<r.length;y++)for(var b=r[y],v=0;v<o.length;v++){var _=o[v],m=void 0,g=void 0;g="".concat(Y(b.text.split(",").map((function(t){return t.trim()})).join("+"))).concat(d).concat(Y(_.text.split(",").map((function(t){return t.trim()})).join("+"))),m=b.nodeA==_.nodeB?new l.a(b.nodeA):new c.a(b.nodeA,_.nodeB),g=D(g.replace(new RegExp("/([)*w])(".concat("\\epsilon",")/g")),"$1").replace(new RegExp("/(".concat("\\epsilon",")([(w])/g")),"$2")),m.text=g,n.push(m)}for(var j=n.length;j--;)(r.some((function(t){return t==n[j]}))||o.some((function(t){return t==n[j]}))||i.some((function(t){return t==n[j]})))&&n.splice(j,1);e.splice(e.indexOf(t),1);for(var O=0;O<a.length;O++)n.push(a[O]);return function(t){for(var e=[],n=new Map,r=0;r<t.length;r++){var o=t[r];if(o instanceof l.a){var i=P(o.node),a=n.get(i);null!=a?a.push(o):n.set(i,[o])}else if(o instanceof c.a){var u=P(o.nodeA)+P(o.nodeB),s=n.get(u);null!=s?s.push(o):n.set(u,[o])}}var f,d=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=R(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(n.values());try{for(d.s();!(f=d.n()).done;){var h=f.value;if(h.length>1){h[0].text="".concat(h.map((function(t){return t.text})).join("+"));for(var p=1;p<h.length;p++)e.push(h[p])}}}catch(t){d.e(t)}finally{d.f()}var y=t.length;for(;y--;)e.includes(t[y])&&t.splice(y,1)}(n),!0}function Y(t){if(t.includes("+")){var e=w(t);if(e.length>0&&e[e.length-1]==h){if(t.charAt(0)!=p||t.charAt(t.length-1)!=y)return"(".concat(t,")");for(var n=0,r=1;r<t.length-1;r++)if(t[r]==p?n++:t[r]==y&&n--,n<0)return"(".concat(t,")");if(0!=n)return console.warn('String "'.concat(t,'" has non matching number of parentheses.')),t}}return t}function D(t){if(t.length>2&&t.charAt(0)==p&&t.charAt(t.length-1)==y){for(var e=0,n=1;n<t.length-1;n++)if(t[n]==p?e++:t[n]==y&&e--,e<0)return t;return 0!=e?t:t.substring(1,t.length-1)}return t}function X(t){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function B(t,e){return(B=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function N(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=U(t);if(e){var o=U(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}function L(t,e){if(e&&("object"===X(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return W(t)}function W(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U(t){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function q(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(t,"prototype",{value:Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),writable:!1}),e&&B(t,e)}(i,t);var e,n,r,o=N(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),q(W(n=o.call(this)),"from",void 0),q(W(n),"to",void 0),n.from=t,n.to=e,n}return e=i,(n=[{key:"draw",value:function(t){t.beginPath(),t.moveTo(this.to.x,this.to.y),t.lineTo(this.from.x,this.from.y),t.stroke(),Object(O.b)(t,this.to.x,this.to.y,Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x))}},{key:"contains_point",value:function(t){return!1}},{key:"set_anchor_point",value:function(t,e){}}])&&C(e.prototype,n),r&&C(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(n("+MSS").a);function F(t){return function(t){if(Array.isArray(t))return z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||H(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t,e){if(t){if("string"==typeof t)return z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(t,e):void 0}}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function J(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?J(Object(n),!0).forEach((function(e){G(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Q(t,e,n){return e&&$(t.prototype,e),n&&$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function G(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var V=Q((function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),G(this,"canvas",void 0),G(this,"update_select",(function(t){null!=t.selected_object&&(t.selected_object.selected=!1);var e=n.canvas.cursor.obj_at_last_pos;t.selected_object=e,null!=e&&(e.selected=!0,(e instanceof A.a||e instanceof l.a)&&e.set_mouse_start(n.canvas.cursor.mouse_down_pos.x,n.canvas.cursor.mouse_down_pos.y))})),G(this,"draw_node",(function(t){if(null==n.canvas.cursor.obj_at_last_pos){var e=n.canvas.cursor.last_pos,r=new A.a(e.x,e.y);r.selected=!0,null!=t.selected_object&&(t.selected_object.selected=!1),t.selected_object=r,t.nodes.push(r)}})),G(this,"toggle_accept_state",(function(t){var e=n.canvas.cursor.obj_at_last_pos;e instanceof A.a&&(e.isAcceptState=!e.isAcceptState),t.selected_object=e})),G(this,"drag",(function(t){var e=n.canvas.cursor.last_pos;t.active_objects.length>0||null!=t.selected_object&&t.selected_object.set_anchor_point(e.x,e.y)})),G(this,"update_temp_link",(function(t){var e,r=n.canvas.cursor.obj_at_mouse_down,o=n.canvas.cursor.obj_at_last_pos,i=Z({},n.canvas.cursor.mouse_down_pos),a=Z({},n.canvas.cursor.last_pos);r instanceof A.a&&o instanceof A.a?r==o?((e=new l.a(r)).set_mouse_start(i.x,i.y),e.set_anchor_point(a.x,a.y)):e=new c.a(r,o):e=o instanceof A.a?new u.a(o,i):new K(r instanceof A.a?r.closest_point_on_circle(a.x,a.y):i,a),t.temp_link=e})),G(this,"end_temp_link",(function(t){t.temp_link instanceof K||(t.links.push(t.temp_link),t.temp_link.selected=!0,null!=t.selected_object&&(t.selected_object.selected=!1),t.selected_object=t.temp_link),t.temp_link=void 0})),G(this,"eliminate",(function(t){var e,n=!1,r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=H(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}([t.selected_object].concat(F(t.active_objects)));try{for(r.s();!(e=r.n()).done;){var o=e.value;o instanceof A.a&&(n=n||I(o,t.nodes,t.links))}}catch(t){r.e(t)}finally{r.f()}return null!=t.selected_object&&(t.selected_object.selected=!1,t.selected_object=void 0),n})),G(this,"delete_element",(function(t){if(null!=t.selected_object){if(t.selected_object instanceof A.a){for(var e=t.nodes.length-1;e>=0;e--)if(t.selected_object==t.nodes[e]){t.nodes.splice(e,1);break}for(var n=t.links.length-1;n>=0;n--){var r=t.links[n],o=!1;r instanceof c.a?o=r.nodeA==t.selected_object||r.nodeB==t.selected_object:(r instanceof u.a||r instanceof l.a)&&(o=r.node==t.selected_object),o&&t.links.splice(n,1)}}else for(var i=t.links.length-1;i>=0;i--)if(t.selected_object==t.links[i]){t.links.splice(i,1);break}t.selected_object=void 0}return!1})),this.canvas=e}));function tt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(t,e)||nt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=nt(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function nt(t,e){if(t){if("string"==typeof t)return rt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rt(t,e):void 0}}function rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function it(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function at(t,e,n){return e&&it(t.prototype,e),n&&it(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ct(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var lt=function(){function t(){ot(this,t),ct(this,"state_names",void 0),ct(this,"transitions",void 0),ct(this,"starting_state",void 0),ct(this,"accepting_states",void 0),this.state_names=[],this.transitions=new Map,this.starting_state=-1,this.accepting_states=[]}return at(t,[{key:"load",value:function(t,e){this.state_names=[],this.transitions=new Map,this.starting_state=-1,this.accepting_states=[];for(var n=new Map,r=0,o=0;o<t.length;o++){var i=t[o];n.set(P(i),r),this.state_names.push(i.text),i.isAcceptState&&this.accepting_states.push(r),r++}for(var a=0;a<e.length;a++){var s=e[a];if(s instanceof c.a){var f=n.get(P(s.nodeA)),d=n.get(P(s.nodeB)),h=s.text.split(",").map((function(t){return t.trim()}));if(null!=f&&null!=d){var p=this.transitions.get(f);null==p&&(p=new Map,this.transitions.set(f,p));var y,b=et(h);try{for(b.s();!(y=b.n()).done;){var v=y.value,_=p.get(v);null==_&&(_=[],p.set(v,_)),_.push(d)}}catch(t){b.e(t)}finally{b.f()}}}else if(s instanceof l.a){var m=n.get(P(s.node)),g=m,j=s.text.split(",").map((function(t){return t.trim()}));if(null!=m&&null!=g){var O=this.transitions.get(m);null==O&&(O=new Map,this.transitions.set(m,O));var w,A=et(j);try{for(A.s();!(w=A.n()).done;){var x=w.value,S=O.get(x);null==S&&(S=[],O.set(x,S)),S.push(g)}}catch(t){A.e(t)}finally{A.f()}}}else if(s instanceof u.a){var k=n.get(P(s.node));null!=k&&(this.starting_state=k)}}}},{key:"create_elements",value:function(){for(var t=[],e=[],n=new Map,r=0;r<this.state_names.length;r++){var o=M(),i=new A.a(o.x,o.y);i.text=this.state_names[r],n.set(r,i),this.accepting_states.includes(r)&&(i.isAcceptState=!0),t.push(i)}var a,s=et(this.transitions.entries());try{for(s.s();!(a=s.n()).done;){var f=tt(a.value,2),d=f[0],h=f[1],p=n.get(d);if(null!=p){var y,b=et(h.entries());try{for(b.s();!(y=b.n()).done;){var v,_=tt(y.value,2),m=_[0],g=et(_[1]);try{for(g.s();!(v=g.n()).done;){var j=v.value,O=n.get(j);if(null!=O){var w=void 0;d==j?w=new l.a(p):(w=new c.a(p,O)).perpendicularPart+=100*Math.random(),w.text=m,e.push(w)}}}catch(t){g.e(t)}finally{g.f()}}}catch(t){b.e(t)}finally{b.f()}}}}catch(t){s.e(t)}finally{s.f()}if(-1!=this.starting_state){var x=n.get(this.starting_state);if(null!=x){var S=new u.a(x),k=M();S.set_anchor_point(k.x,k.y),S.text="start",e.push(S)}}return{nodes:t,links:e}}},{key:"add_transitions",value:function(t,e,n){var r=this.transitions.get(t);null==r&&(r=new Map,this.transitions.set(t,r));var o=r.get(e);null==o&&(o=[],r.set(e,o)),k(o,n)}},{key:"add_transition",value:function(t,e,n){var r=this.transitions.get(t);null==r&&(r=new Map,this.transitions.set(t,r));var o=r.get(e);null==o&&(o=[],r.set(e,o)),o.includes(n)||o.push(n)}},{key:"deep_delta",value:function(t,e){var n,r=[],o=et(this.get_equivalents(t));try{for(o.s();!(n=o.n()).done;){var i=n.value;k(r,this.shallow_delta(i,e))}}catch(t){o.e(t)}finally{o.f()}return this.get_equivalents(r).slice()}},{key:"shallow_delta",value:function(t,e){var n=this.transitions.get(t);if(null!=n){var r=n.get(e);if(null!=r)return r.slice()}return[]}},{key:"get_equivalents",value:function(t){for(var e=(t=Array.isArray(t)?t.slice():[t]).slice(),n=e.pop();null!=n;){var r,o=et(this.shallow_delta(n,"\\epsilon").values());try{for(o.s();!(r=o.n()).done;){var i=r.value;t.includes(i)||e.push(i)}}catch(t){o.e(t)}finally{o.f()}n=e.pop()}return t}},{key:"is_deterministic",value:function(){var t,e=et(this.transitions.values());try{for(e.s();!(t=e.n()).done;){var n,r=et(t.value.entries());try{for(r.s();!(n=r.n()).done;){var o=tt(n.value,2),i=o[0],a=o[1];if("\\epsilon"==i||a.length>1)return!1}}catch(t){r.e(t)}finally{r.f()}}}catch(t){e.e(t)}finally{e.f()}return!0}}]),t}();function ut(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(t,e)||ft(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ft(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function ft(t,e){if(t){if("string"==typeof t)return dt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(t,e):void 0}}function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ht(t){var e=new lt,n=t.nodes,r=t.links;if(e.load(n,r),e.is_deterministic())return console.warn("Tried to perform subset construction on a DFA."),!1;if(-1==e.starting_state)return console.warn("FA has no starting state so subset construction failed."),!1;var o=function(t){var e=new lt,n=new Map,r=[],o=[],i=0;e.starting_state=0;var a=t.get_equivalents(t.starting_state);n.set(pt(a),i);var c=Array.from(a).map((function(e){return t.state_names[e]}));c.sort(),r.push("{".concat(c.join(""),"}")),o.push(a),Array.from(a).some((function(e){return t.accepting_states.includes(e)}))&&e.accepting_states.push(i);i++;var l=o.pop();for(;null!=l;){var u,s=pt(l),f=new Map,d=st(l);try{for(d.s();!(u=d.n()).done;){var h=u.value,p=t.transitions.get(h);if(null!=p){var y,b=st(p.keys());try{for(b.s();!(y=b.n()).done;){var v=y.value;if("\\epsilon"!=v){var _=f.get(v);null==_&&(_=[],f.set(v,_)),k(_,t.deep_delta(h,v))}}}catch(t){b.e(t)}finally{b.f()}}}}catch(t){d.e(t)}finally{d.f()}var m,g=st(f.entries());try{for(g.s();!(m=g.n()).done;){var j=ut(m.value,2),O=j[0],w=j[1],A=pt(w),x=n.get(s);if(n.has(A))e.add_transition(x,O,n.get(A));else{var S=pt(w);n.set(S,i);var P=Array.from(w).map((function(e){return t.state_names[e]}));P.sort(),r.push("{".concat(P.join(","),"}")),o.push(w),Array.from(w).some((function(e){return t.accepting_states.includes(e)}))&&e.accepting_states.push(i),e.add_transition(x,O,i),i++}}}catch(t){g.e(t)}finally{g.f()}l=o.pop()}return e.state_names=r,e}(e).create_elements();return function(t,e,n,r){t.splice(0,t.length),e.splice(0,e.length);for(var o=0;o<n.length;o++)t.push(n[o]);for(var i=0;i<r.length;i++)e.push(r[i])}(n,r,o.nodes,o.links),!0}function pt(t){var e=t.slice();return e.sort(),e.join(",")}var yt=n("kM35");function bt(t){for(var e=Object(i.d)("nodes"),n=Object(i.d)("links"),r=0;r<e.length;r++)if(e[r].contains_point(t))return e[r];for(var o=0;o<n.length;o++)if(n[o].contains_point(t))return n[o]}function vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var gt=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),mt(this,"canvas",void 0),mt(this,"Tools",void 0),mt(this,"mouse_down",(function(t){switch(n.sync_canvas_coordinates(t,!0),n.canvas.cursor.mouse_down_pos=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(n),!0).forEach((function(e){mt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},n.canvas.cursor.last_pos),n.canvas.cursor.obj_at_mouse_down=n.canvas.cursor.obj_at_last_pos,Object(i.e)(["selected_object"],n.Tools.update_select),n.canvas.cursor.down=!0,Object(i.d)("curr_tool")){case yt.a.DRAW_LINK:Object(i.e)(["temp_link"],n.Tools.update_temp_link)}n.canvas.cursor.moving=!1})),mt(this,"mouse_up",(function(t){return n.sync_canvas_coordinates(t),n.canvas.cursor.down=!1,n.canvas.cursor.moving||(t.button==yt.b.LEFT?n.left_click():t.button==yt.b.RIGHT&&n.right_click()),null!=Object(i.d)("temp_link")&&Object(i.e)(["temp_link"],n.Tools.end_temp_link),n.canvas.cursor.moving=!1,t.preventDefault(),!1})),mt(this,"mouse_move",(function(t){n.sync_canvas_coordinates(t,!0),n.canvas.cursor.moving=!0,n.canvas.cursor.down&&n.drag()})),mt(this,"dbl_click",(function(t){n.sync_canvas_coordinates(t),n.canvas.cursor.obj_at_last_pos instanceof A.a?Object(i.e)(["nodes","selected_object"],n.Tools.toggle_accept_state):Object(i.e)(["nodes","selected_object"],n.Tools.draw_node)})),mt(this,"drag",(function(){switch(Object(i.d)("curr_tool")){case yt.a.DRAW_LINK:Object(i.e)(["temp_link"],n.Tools.update_temp_link);break;default:Object(i.e)(["nodes","links"],n.Tools.drag)}})),mt(this,"left_click",(function(){switch(Object(i.d)("curr_tool")){case yt.a.DRAW_NODE:Object(i.e)(["nodes","selected_object"],n.Tools.draw_node);break;case yt.a.DRAW_ACCEPT:Object(i.e)(["nodes","selected_object"],n.Tools.toggle_accept_state);break;case yt.a.ELIMINATE:Object(i.e)(["nodes","links","selected_object"],n.Tools.eliminate)}})),mt(this,"right_click",(function(){Object(i.e)(["nodes","links"],ht)})),this.canvas=e,this.Tools=e.tools}var e,n,r;return e=t,(n=[{key:"prevent_default",value:function(t){return t.preventDefault(),!1}},{key:"sync_canvas_coordinates",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.canvas.cursor.last_pos=this.canvas.to_canvas_space(t),e&&(this.canvas.cursor.obj_at_last_pos=bt(this.canvas.cursor.last_pos))}}])&&_t(e.prototype,n),r&&_t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function jt(t){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wt(t,e){return(wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function At(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kt(t);if(e){var o=kt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xt(this,n)}}function xt(t,e){if(e&&("object"===jt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return St(t)}function St(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Mt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(t,"prototype",{value:Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),writable:!1}),e&&wt(t,e)}(l,t);var e,n,r,c=At(l);function l(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),Pt(St(t=c.call(this)),"ref",Object(o.createRef)()),Pt(St(t),"el",void 0),Pt(St(t),"ctx",void 0),Pt(St(t),"cursor",void 0),Pt(St(t),"handlers",void 0),Pt(St(t),"tools",void 0),Pt(St(t),"caret_interval",-1),Pt(St(t),"caret_function",(function(){null==Object(i.d)("selected_object")?(window.clearInterval(t.caret_interval),t.caret_interval=-1):t.setState({caret_visible:!t.state.caret_visible})})),Pt(St(t),"draw",(function(){if(null!=t.ctx){var e=t.state.view_zone;t.ctx.setTransform(e.zoom,0,0,e.zoom,e.x,e.y),t.draw_using(t.ctx)}else if(null!=t.el){var n=t.el.getContext("2d");if(null!=n){t.ctx=n;var r=t.state.view_zone;n.setTransform(r.zoom,0,0,r.zoom,r.x,r.y),t.draw_using(n)}}})),t.state={caret_visible:!1,view_zone:{zoom:1,x:0,y:0},selected_zone:void 0},t.cursor={mouse_down_pos:{x:0,y:0},obj_at_mouse_down:void 0,last_pos:{x:0,y:0},obj_at_last_pos:void 0,down:!1,moving:!1},t.tools=new V(St(t)),t.handlers=new gt(St(t)),t}return e=l,(n=[{key:"componentDidMount",value:function(){Object(i.h)(this),this.el=this.ref.current,this.ctx=this.el.getContext("2d"),this.el.onmousedown=this.handlers.mouse_down,this.el.onmousemove=this.handlers.mouse_move,this.el.onmouseup=this.handlers.mouse_up,this.el.ondblclick=this.handlers.dbl_click,this.el.oncontextmenu=this.handlers.prevent_default,Object(i.i)(["nodes","links","active_objects","selected_object","temp_link"],this),Object(i.a)(this.draw)}},{key:"componentWillUnmount",value:function(){Object(i.j)(this)}},{key:"shouldComponentUpdate",value:function(){return this.reinit_caret(),this.draw(),!1}},{key:"render",value:function(){return Object(o.h)("canvas",{ref:this.ref,id:"canvas",width:a.c.x,height:a.c.y},Object(o.h)("span",null,"Your browser does not support",Object(o.h)("br",null),"the HTML5 <canvas> element"))}},{key:"reinit_caret",value:function(){null!=Object(i.d)("selected_object")&&-1==this.caret_interval&&(this.caret_interval=window.setInterval(this.caret_function,300))}},{key:"to_canvas_space",value:function(t){var e=this.state.view_zone,n=this.el.getBoundingClientRect(),r=t.clientX-n.x,o=t.clientY-n.y;return{x:(r-e.x)/e.zoom,y:(o-e.y)/e.zoom}}},{key:"draw_using",value:function(t){if(null!=this.el){var e=Object(i.d)("nodes"),n=Object(i.d)("links"),r=Object(i.d)("selected_object"),o=Object(i.d)("temp_link");t.clearRect(0,0,this.el.width,this.el.height),t.save(),t.translate(.5,.5);for(var a=0;a<e.length;a++)t.lineWidth=1,t.fillStyle=t.strokeStyle=e[a].curr_colour(),e[a].draw(t,e[a]==r&&this.state.caret_visible);for(var c=0;c<n.length;c++)t.lineWidth=1,t.fillStyle=t.strokeStyle=n[c].curr_colour(),n[c].draw(t,n[c]==r&&this.state.caret_visible);null!=o&&(t.lineWidth=1,t.fillStyle=t.strokeStyle="black",o.draw(t,o==r&&this.state.caret_visible)),t.restore()}}}])&&Ot(e.prototype,n),r&&Ot(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(o.Component)},HteQ:function(t,e){t.exports=require("preact")},NZMw:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n("+MSS"),o=n("tp4g"),i=n("pT2+");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(t,"prototype",{value:Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),writable:!1}),e&&l(t,e)}(s,t);var e,n,r,a=u(s);function s(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),h(f(n=a.call(this)),"node",void 0),h(f(n),"deltaX",void 0),h(f(n),"deltaY",void 0),h(f(n),"text",void 0),n.node=t,n.deltaX=0,n.deltaY=0,n.text="",e&&n.set_anchor_point(e.x,e.y),n}return e=s,(n=[{key:"set_anchor_point",value:function(t,e){this.deltaX=t-this.node.x,this.deltaY=e-this.node.y,Math.abs(this.deltaX)<o.g&&(this.deltaX=0),Math.abs(this.deltaY)<o.g&&(this.deltaY=0)}},{key:"get_start_point",value:function(){return{x:this.node.x+this.deltaX,y:this.node.y+this.deltaY}}},{key:"get_endpoints",value:function(){var t=this.node.x+this.deltaX,e=this.node.y+this.deltaY,n=this.node.closest_point_on_circle(t,e);return{startX:t,startY:e,endX:n.x,endY:n.y}}},{key:"draw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.get_endpoints();t.beginPath(),t.moveTo(n.startX,n.startY),t.lineTo(n.endX,n.endY),t.stroke();var r=Math.atan2(n.startY-n.endY,n.startX-n.endX);Object(i.c)(t,this.text,n.startX,n.startY,r,this.selected,e),Object(i.b)(t,n.endX,n.endY,Math.atan2(-this.deltaY,-this.deltaX))}},{key:"contains_point",value:function(t){var e=t.x,n=t.y,r=this.get_endpoints(),i=r.endX-r.startX,a=r.endY-r.startY,c=Math.sqrt(i*i+a*a),l=(i*(e-r.startX)+a*(n-r.startY))/(c*c),u=(i*(n-r.startY)-a*(e-r.startX))/c;return l>0&&l<1&&Math.abs(u)<o.d}}])&&c(e.prototype,n),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(r.a)},YfD9:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n("+MSS"),o=n("tp4g"),i=n("pT2+");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(t,"prototype",{value:Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),writable:!1}),e&&l(t,e)}(s,t);var e,n,r,a=u(s);function s(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),h(f(n=a.call(this)),"x",void 0),h(f(n),"y",void 0),h(f(n),"mouseOffsetX",void 0),h(f(n),"mouseOffsetY",void 0),h(f(n),"isAcceptState",void 0),h(f(n),"text",void 0),n.x=t,n.y=e,n.mouseOffsetX=0,n.mouseOffsetY=0,n.isAcceptState=!1,n.text="",n}return e=s,(n=[{key:"set_mouse_start",value:function(t,e){this.mouseOffsetX=this.x-t,this.mouseOffsetY=this.y-e}},{key:"set_anchor_point",value:function(t,e){this.x=t+this.mouseOffsetX,this.y=e+this.mouseOffsetY}},{key:"draw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.beginPath(),t.arc(this.x,this.y,o.e,0,2*Math.PI,!1),t.stroke(),Object(i.c)(t,this.text,this.x,this.y,null,this.selected,e),this.isAcceptState&&(t.beginPath(),t.arc(this.x,this.y,o.e-6,0,2*Math.PI,!1),t.stroke())}},{key:"closest_point_on_circle",value:function(t,e){var n=t-this.x,r=e-this.y,i=Math.sqrt(n*n+r*r);return{x:this.x+n*o.e/i,y:this.y+r*o.e/i}}},{key:"contains_point",value:function(t){return(t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y)<o.e*o.e}}])&&c(e.prototype,n),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(r.a)},d7ev:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return b}));var r=n("HteQ"),o=n("gSRK"),i=n("kM35");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(t,"prototype",{value:Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y(t);if(e){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(e){s(a,e);var n=d(a);function a(){var t;return c(this,a),t=n.call(this),Object(o.i)(["curr_tool"],p(t)),t}return u(a,[{key:"render",value:function(){return Object(r.h)(t,null,Object(r.h)("div",null,"Tools:"),Object(r.h)("div",{style:"display: flex; flex-direction: row;"},Object(r.h)(v,{tooltip:"Select",icon:"",tool_mode:i.a.POINTER}),Object(r.h)(v,{tooltip:"Draw Node",icon:"",tool_mode:i.a.DRAW_NODE}),Object(r.h)(v,{tooltip:"Draw Link",icon:"",tool_mode:i.a.DRAW_LINK}),Object(r.h)(v,{tooltip:"Draw Accept",icon:"",tool_mode:i.a.DRAW_ACCEPT}),Object(r.h)(v,{tooltip:"Eliminate",icon:"",tool_mode:i.a.ELIMINATE})))}}]),a}(r.Component),v=function(t){s(n,t);var e=d(n);function n(t){return c(this,n),e.call(this,t)}return u(n,[{key:"render",value:function(){var t=this;return Object(r.h)("div",{onClick:function(e){Object(o.f)(["curr_tool"],(function(e){return e.curr_tool!=t.props.tool_mode&&(e.curr_tool=t.props.tool_mode,!0)}))},style:this.props.tool_mode==Object(o.d)("curr_tool")?"color: cyan":"color: black"},this.props.tooltip)}}]),n}(r.Component)}).call(this,n("HteQ").Fragment)},dmYQ:function(t,e,n){"use strict";(function(t){var r=n("HteQ"),o=n("gSRK"),i=n("GClJ"),a=n("d7ev");function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(t,"prototype",{value:Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),writable:!1}),e&&s(t,e)}(p,e);var n,c,d,h=f(p);function p(){return l(this,p),h.apply(this,arguments)}return n=p,(c=[{key:"componentWillMount",value:function(){Object(o.g)()}},{key:"render",value:function(){return Object(r.h)(t,null,Object(r.h)("div",{id:"preact_root"},Object(r.h)(a.a,null),Object(r.h)(i.a,null)),Object(r.h)("div",null,Object(r.h)("textarea",{id:"output"}),Object(r.h)("p",null,"The big white box above is the FSM designer. Here's how to use it:"),Object(r.h)("ul",null,Object(r.h)("li",null,Object(r.h)("b",null,"Add a state:")," double-click on the canvas"),Object(r.h)("li",null,Object(r.h)("b",null,"Add an arrow:")," shift-drag on the canvas"),Object(r.h)("li",null,Object(r.h)("b",null,"Move something:")," drag it around"),Object(r.h)("li",null,Object(r.h)("b",null,"Delete something:")," click it and press the delete key (not the backspace key)")),Object(r.h)("ul",null,Object(r.h)("li",null,Object(r.h)("b",null,"Make accept state:")," double-click on an existing state"),Object(r.h)("li",null,Object(r.h)("b",null,"Type numeric subscript:"),' put an underscore before the number (like "S_0")'),Object(r.h)("li",null,Object(r.h)("b",null,"Type greek letter:"),' put a backslash before it (like "\\beta")'),Object(r.h)("li",null,Object(r.h)("b",null,"Eliminate a non-accept, non-start state:")," use the state tool or press ]"),Object(r.h)("li",null,Object(r.h)("b",null,"Perform subset construction:")," right click anywhere on the canvas")),Object(r.h)("p",null,"This was made in HTML5 and JavaScript using the canvas element.")),Object(r.h)("p",null,"Created by ",Object(r.h)("a",{href:"http://madebyevan.com/"},"Evan Wallace")," in 2010 ",Object(r.h)("br",null),"+ Extended by ",Object(r.h)("a",{href:"https://alialhasnawi.github.io/"},"Ali Al-Hasnawi in 2021")))}}])&&u(n.prototype,c),d&&u(n,d),Object.defineProperty(n,"prototype",{writable:!1}),p}(r.Component);e.a=p}).call(this,n("HteQ").Fragment)},gSRK:function(t,e,n){"use strict";n.d(e,"i",(function(){return p})),n.d(e,"j",(function(){return y})),n.d(e,"c",(function(){return b})),n.d(e,"h",(function(){return v})),n.d(e,"e",(function(){return m})),n.d(e,"f",(function(){return g})),n.d(e,"b",(function(){return j})),n.d(e,"d",(function(){return O})),n.d(e,"a",(function(){return w})),n.d(e,"g",(function(){return S}));var r=n("1aiP"),o=n("+BZU"),i=n("NZMw"),a=n("YfD9"),c=n("kM35");function l(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var s,f={temp_link:void 0,active_objects:[],selected_object:void 0,nodes:[],links:[],last_tool:c.a.POINTER,curr_tool:c.a.POINTER},d={temp_link:[],active_objects:[],selected_object:[],nodes:[],links:[],last_tool:[],curr_tool:[]},h=new Map;function p(t,e){var n,r=l(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;d[o].includes(e)||d[o].push(e)}}catch(t){r.e(t)}finally{r.f()}h.set(e,t)}function y(t){var e=h.get(t);if(null!=e){var n,r=l(e);try{for(r.s();!(n=r.n()).done;)for(var o=n.value,i=d[o].length-1;i>=0;i--)t==d[o][i]&&(d[o].splice(i,1),i--)}catch(t){r.e(t)}finally{r.f()}}}function b(){return s}function v(t){null==s&&(s=t)}var _=[];function m(t,e){t.includes("curr_tool")&&(f.last_tool=f.curr_tool),e(f),(t.includes("nodes")||t.includes("links")||t.includes("selected_object"))&&A(),x(t)}function g(t,e){var n=f.curr_tool;e(f)&&(t.includes("curr_tool")&&(f.last_tool=n),(t.includes("nodes")||t.includes("links")||t.includes("selected_object"))&&A(),x(t))}function j(t){x(t)}function O(t){return f[t]}function w(t){return t(f)}function A(){var t=P();_.push(t),[],function(t){if(!localStorage||!JSON)return;localStorage.fsm=t}(t)}function x(t){var e,n=[],r=l(t);try{for(r.s();!(e=r.n()).done;){var o,i=e.value,a=l(d[i]);try{for(a.s();!(o=a.n()).done;){var c=o.value;n.includes(c)||n.push(c)}}catch(t){a.e(t)}finally{a.f()}}}catch(t){r.e(t)}finally{r.f()}for(var u=0,s=n;u<s.length;u++){s[u].setState({})}}function S(){if("undefined"!=typeof window){if(!localStorage||!JSON)return;try{var t=localStorage.getItem("fsm");if(null!=t){var e=k(t);f.nodes=e.nodes,f.links=e.links}}catch(t){localStorage.fsm=""}x(["nodes","links"])}}function k(t){var e=[],n=[];if(!localStorage||!JSON)return{nodes:e,links:n};for(var c=JSON.parse(t),l=0;l<c.nodes.length;l++){var u=c.nodes[l],s=new a.a(u.x,u.y);s.isAcceptState=u.isAcceptState,s.text=u.text,e.push(s)}for(var f=0;f<c.links.length;f++){var d=c.links[f],h=null;"SelfLink"==d.type?((h=new o.a(e[d.node])).anchorAngle=d.anchorAngle,h.text=d.text):"StartLink"==d.type?((h=new i.a(e[d.node])).deltaX=d.deltaX,h.deltaY=d.deltaY,h.text=d.text):"NodeLink"==d.type&&((h=new r.a(e[d.nodeA],e[d.nodeB])).parallelPart=d.parallelPart,h.perpendicularPart=d.perpendicularPart,h.text=d.text,h.lineAngleAdjust=d.lineAngleAdjust),null!=h&&n.push(h)}return{nodes:e,links:n}}function P(){if(!localStorage||!JSON)return"";for(var t=f.nodes,e=f.links,n={nodes:[],links:[]},a=0;a<t.length;a++){var c=t[a],l={x:c.x,y:c.y,text:c.text,isAcceptState:c.isAcceptState};n.nodes.push(l)}for(var u=0;u<e.length;u++){var s=e[u],d=void 0;s instanceof o.a?d={type:"SelfLink",node:t.indexOf(s.node),text:s.text,anchorAngle:s.anchorAngle}:s instanceof i.a?d={type:"StartLink",node:t.indexOf(s.node),text:s.text,deltaX:s.deltaX,deltaY:s.deltaY}:s instanceof r.a&&(d={type:"NodeLink",nodeA:t.indexOf(s.nodeA),nodeB:t.indexOf(s.nodeB),text:s.text,lineAngleAdjust:s.lineAngleAdjust,parallelPart:s.parallelPart,perpendicularPart:s.perpendicularPart}),null!=d&&n.links.push(d)}return JSON.stringify(n)}},kM35:function(t,e,n){"use strict";var r,o,i;n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),function(t){t[t.POINTER=1]="POINTER",t[t.DRAW_NODE=2]="DRAW_NODE",t[t.DRAW_LINK=3]="DRAW_LINK",t[t.DRAW_ACCEPT=4]="DRAW_ACCEPT",t[t.ELIMINATE=5]="ELIMINATE",t[t.PAN=6]="PAN"}(r||(r={})),function(t){t[t.LOAD=1]="LOAD",t[t.SAVE=2]="SAVE",t[t.UNDO=3]="UNDO",t[t.REDO=4]="REDO",t[t.SUBSET_CONSTRUCT=5]="SUBSET_CONSTRUCT",t[t.RESET_ZOOM=6]="RESET_ZOOM",t[t.FORCE_EXPAND=7]="FORCE_EXPAND"}(o||(o={})),function(t){t[t.LEFT=0]="LEFT",t[t.MIDDLE=1]="MIDDLE",t[t.RIGHT=2]="RIGHT"}(i||(i={}))},"pT2+":function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return l}));var r=n("gSRK"),o=["Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega"];function i(t,e,n,r,o,i){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=l(e);t.font='20px "Times New Roman", serif';var s=c(u);if(n-=s/2,null!=o){var f=Math.cos(o),d=Math.sin(o),h=(s/2+5)*(f>0?1:-1),p=15*(d>0?1:-1),y=d*Math.pow(Math.abs(d),40)*h-f*Math.pow(Math.abs(f),10)*p;n+=h-d*y,r+=p+f*y}"advancedFillText"in t?t.advancedFillText(u,e,n+s/2,r,o):(n=Math.round(n),r=Math.round(r),t.fillText(u,n,r+6),i&&a&&document.hasFocus()&&(n+=s,t.beginPath(),t.moveTo(n,r-10),t.lineTo(n,r+10),t.stroke()))}function a(t,e,n,r){var o=Math.cos(r),i=Math.sin(r);t.beginPath(),t.moveTo(e,n),t.lineTo(e-8*o+5*i,n-8*i-5*o),t.lineTo(e-8*o-5*i,n-8*i+5*o),t.fill()}function c(t){var e=Object(r.c)();if(null!=e){var n=e.ctx;if(null!=n)return n.font='20px "Times New Roman", serif',n.measureText(t).width}return 0}function l(t){for(var e=0;e<o.length;e++){var n=o[e];t=(t=t.replace(new RegExp("\\\\"+n,"g"),String.fromCharCode(913+e+ +(e>16)))).replace(new RegExp("\\\\"+n.toLowerCase(),"g"),String.fromCharCode(945+e+ +(e>16)))}for(var r=0;r<10;r++)t=t.replace(new RegExp("_"+r,"g"),String.fromCharCode(8320+r));return t}},qVkA:function(t,e,n){"use strict";n.r(e);var r=n("dmYQ"),o=n("gSRK"),i=n("kM35");e.default=r.a;Object(o.g)(),"undefined"!=typeof window&&(window.onkeydown=function(t){switch(t.key){case"Shift":Object(o.f)(["curr_tool"],(function(t){return t.curr_tool==i.a.DRAW_LINK?(t.last_tool=t.curr_tool,!1):(t.curr_tool=i.a.DRAW_LINK,!0)}));break;case"Backspace":Object(o.f)(["selected_object"],(function(t){return null!=t.selected_object&&(t.selected_object.text=t.selected_object.text.substring(0,t.selected_object.text.length-1),!0)}));break;case"]":Object(o.f)(["selected_object"],Object(o.c)().tools.eliminate);break;case"Delete":Object(o.e)(["selected_object"],Object(o.c)().tools.delete_element);break;default:1==t.key.length&&Object(o.f)(["selected_object"],(function(e){return null!=e.selected_object&&(e.selected_object.text+=t.key,!0)}))}return t.preventDefault(),!1},window.onkeyup=function(t){return"Shift"==t.key&&Object(o.f)(["curr_tool"],(function(t){return t.curr_tool==i.a.DRAW_LINK&&(t.curr_tool=t.last_tool,!0)})),t.preventDefault(),!1})},tp4g:function(t,e,n){"use strict";n.d(e,"e",(function(){return r})),n.d(e,"g",(function(){return o})),n.d(e,"d",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return c})),n.d(e,"h",(function(){return l})),n.d(e,"f",(function(){return u})),n.d(e,"a",(function(){return s}));var r=30,o=6,i=6,a=30,c={x:800,y:600},l="black",u="blue",s="green"}});
//# sourceMappingURL=ssr-bundle.js.map